module.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"GlobalRule",function(){return o}),r.d(t,"default",function(){return s});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="GLOBAL_RULE",u=function(e){return"boolean"==typeof e||void 0===e||"function"==typeof e&&""===e.name},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.strict,i=void 0!==r&&r;n(this,e),this.strict=i,this.rules=new Map,this.policies=new Map,this.registry=new WeakMap}return i(e,[{key:"rule",value:function(e,t){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u(t)&&(n=void 0===t||t,t=o);var i=this.subjectMapper(t);return(Array.isArray(e)?e:[e]).forEach(function(e){var t=r.rules.get(i)||{};t[e]=n,r.rules.set(i,t)}),this}},{key:"policy",value:function(e,t){var r="function"==typeof e?new e:e,n=this.subjectMapper(t);return this.policies.set(n,r),this}},{key:"register",value:function(e,t){return this.registry.set(e,t),this}},{key:"can",value:function(e,t,r){r=void 0===r?o:r;var n=this.subjectMapper(r),i=this.policies.get(n)||this.rules.get(n);if(void 0===i){if(this.strict)throw new Error('Unknown subject "'+n+'"');return!1}if("function"==typeof i[t]){for(var u=arguments.length,s=Array(u>3?u-3:0),a=3;a<u;a++)s[a-3]=arguments[a];return Boolean(i[t].apply(i,[e,r,n].concat(s)))}if(this.strict&&void 0===i[t])throw new Error('Unknown verb "'+t+'"');return Boolean(i[t])}},{key:"some",value:function(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];var u=this;return r.some(function(r){return u.can.apply(u,[e,t,r].concat(i))})}},{key:"every",value:function(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];var u=this;return r.every(function(r){return u.can.apply(u,[e,t,r].concat(i))})}},{key:"mixin",value:function(e){var t=this;return e.prototype.can=function(){return t.can.apply(t,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.can.every=function(){return t.every.apply(t,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.can.some=function(){return t.some.apply(t,[this].concat(Array.prototype.slice.call(arguments)))},this}},{key:"subjectMapper",value:function(e){if("string"==typeof e)return e;var t="function"==typeof e;return t&&this.registry.has(e)?this.registry.get(e):!t&&this.registry.has(e.constructor)?this.registry.get(e.constructor):t?e.name:e.constructor.name}},{key:"reset",value:function(){return this.rules=new Map,this.policies=new Map,this.registry=new WeakMap,this}},{key:"removeRules",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.subjectMapper(e);if(this.rules.has(r)){if(t){return delete this.rules.get(r)[t],this}this.rules.delete(r)}return this}},{key:"removePolicy",value:function(e){var t=this.subjectMapper(e);return this.policies.delete(t),this}},{key:"removeAll",value:function(e){return this.removeRules(e),this.removePolicy(e),this}}]),e}()}]);
//# sourceMappingURL=browser-acl.js.map